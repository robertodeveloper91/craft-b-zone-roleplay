<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>CRAFT ROLEPLAY ‚Äî Calculator Profesional 2026</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üî´</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800;900&family=Rajdhani:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  --p: #ff6b35; --pd: #cc5529; --s: #ffd700; --a: #00d4ff;
  --g: #00ff88; --r: #ff3366; --violet: #b44dff;
  --cu: #b87333; --pb: #6b7b8c; --gunp: #7a7a7a;
  --bg: #060610; --bg2: #0c0c18; --cd: #10101c; --cd2: #161625;
  --inp: #1a1a2a; --tx: #eeeef6; --dm: #6b6b8a; --bd: #252540;
  --glow-p: rgba(255,107,53,.4); --glow-s: rgba(255,215,0,.4);
  --glow-a: rgba(0,212,255,.4); --glow-g: rgba(0,255,136,.4);
  --owner: #ff0000; --owner-glow: rgba(255,0,0,.4);
}
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box }
html { scroll-behavior: smooth }
body {
  font-family: 'Rajdhani', 'Segoe UI', sans-serif;
  background: var(--bg); color: var(--tx);
  min-height: 100vh; overflow-x: hidden;
  font-size: 16px; line-height: 1.5;
}

/* === LOGIN SCREEN === */
#login-screen {
  position: fixed; inset: 0; z-index: 10000;
  background: linear-gradient(135deg, var(--bg) 0%, #0a0a1a 100%);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  padding: 20px;
}
.login-box {
  background: linear-gradient(145deg, var(--cd), var(--cd2));
  border: 2px solid var(--bd); border-radius: 24px;
  padding: 50px 40px; max-width: 480px; width: 100%;
  text-align: center; position: relative;
  box-shadow: 0 20px 60px rgba(0,0,0,.5), 0 0 40px rgba(88,101,242,.1);
}
.login-box::before {
  content:''; position:absolute; top:0; left:0; width:100%; height:4px;
  background: linear-gradient(90deg, #5865F2, #7289da, #5865F2);
  border-radius: 24px 24px 0 0;
}
.login-logo {
  font-family: 'Orbitron', monospace; font-size: 2rem; font-weight: 900;
  background: linear-gradient(135deg, #5865F2, #7289da);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  margin-bottom: 10px; letter-spacing: 3px;
}
.login-sub { color: var(--dm); font-size: .9rem; margin-bottom: 30px; }
.discord-btn {
  display: inline-flex; align-items: center; gap: 12px;
  padding: 16px 32px; background: linear-gradient(135deg, #5865F2, #4752C4);
  border: none; border-radius: 12px; color: white;
  font-family: 'Rajdhani', sans-serif; font-size: 1.1rem; font-weight: 700;
  cursor: pointer; transition: all .3s; text-decoration: none;
  box-shadow: 0 4px 20px rgba(88,101,242,.3);
}
.discord-btn:hover {
  transform: translateY(-2px); box-shadow: 0 8px 30px rgba(88,101,242,.4);
}
.discord-btn svg { width: 24px; height: 24px; }
.owner-badge {
  display: inline-block;
  background: linear-gradient(135deg, var(--owner), #cc0000);
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.7rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-top: 10px;
  box-shadow: 0 0 20px var(--owner-glow);
  animation: pulse 2s infinite;
}
.pending-box {
  background: rgba(255,193,7,.1); border: 1px solid rgba(255,193,7,.3);
  border-radius: 12px; padding: 20px; margin-top: 20px;
}
.pending-box h3 { color: #ffc107; margin-bottom: 10px; font-family: 'Orbitron', monospace; }
.pending-box p { color: var(--dm); font-size: .9rem; }
.user-info {
  display: flex; align-items: center; gap: 15px; margin-bottom: 20px;
  padding: 15px; background: rgba(0,0,0,.2); border-radius: 12px;
}
.user-avatar { width: 50px; height: 50px; border-radius: 50%; border: 2px solid #5865F2; }
.user-avatar.owner { border-color: var(--owner); box-shadow: 0 0 20px var(--owner-glow); }
.user-details { text-align: left; }
.user-name { font-weight: 700; color: var(--tx); font-size: 1.1rem; }
.user-name.owner { color: var(--owner); text-shadow: 0 0 10px var(--owner-glow); }
.user-id { font-family: 'JetBrains Mono', monospace; font-size: .75rem; color: var(--dm); }

/* === ADMIN PANEL === */
#admin-panel {
  display: none; position: fixed; top: 20px; right: 20px; z-index: 9999;
  background: linear-gradient(145deg, var(--cd), var(--cd2));
  border: 2px solid var(--r); border-radius: 16px;
  padding: 20px; width: 450px; max-height: 85vh; overflow-y: auto;
  box-shadow: 0 10px 40px rgba(0,0,0,.5), 0 0 30px rgba(255,51,102,.2);
}
#admin-panel.owner {
  border-color: var(--owner);
  box-shadow: 0 10px 40px rgba(0,0,0,.5), 0 0 30px var(--owner-glow);
}
#admin-panel h3 {
  font-family: 'Orbitron', monospace; color: var(--r);
  margin-bottom: 15px; display: flex; align-items: center; gap: 8px;
}
#admin-panel.owner h3 {
  color: var(--owner);
  text-shadow: 0 0 20px var(--owner-glow);
}
.admin-btn {
  position: fixed; top: 20px; right: 20px; z-index: 9998;
  padding: 12px 20px; background: linear-gradient(135deg, var(--r), #d62839);
  border: none; border-radius: 10px; color: white;
  font-family: 'Rajdhani', sans-serif; font-weight: 700; cursor: pointer;
  box-shadow: 0 4px 15px rgba(255,51,102,.3);
}
.admin-btn.owner {
  background: linear-gradient(135deg, var(--owner), #990000);
  box-shadow: 0 4px 15px var(--owner-glow);
  animation: pulse 2s infinite;
}
.user-list { display: flex; flex-direction: column; gap: 10px; }
.user-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px; background: rgba(0,0,0,.2); border-radius: 10px;
  border: 1px solid var(--bd);
}
.user-item.approved { border-color: var(--g); background: rgba(0,255,136,.05); }
.user-item.pending { border-color: #ffc107; background: rgba(255,193,7,.05); }
.user-item.owner { border-color: var(--owner); background: rgba(255,0,0,.1); }
.user-item span { font-size: .85rem; }
.action-btns { display: flex; gap: 6px; }
.action-btn {
  padding: 6px 12px; border: none; border-radius: 6px;
  font-size: .75rem; font-weight: 700; cursor: pointer; transition: .2s;
}
.approve-btn { background: var(--g); color: #000; }
.reject-btn { background: var(--r); color: #fff; }
.remove-btn { background: var(--dm); color: #fff; }
.owner-btn { background: var(--owner); color: #fff; }
.stats { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
.stat-box {
  padding: 10px; background: rgba(0,0,0,.2); border-radius: 8px; text-align: center;
}
.stat-box .num { font-size: 1.5rem; font-weight: 900; color: var(--s); }
.stat-box .lbl { font-size: .7rem; color: var(--dm); text-transform: uppercase; }

/* === DATA MANAGER === */
.data-manager {
  margin-top: 20px;
  border-top: 2px solid var(--bd);
  padding-top: 20px;
}
.data-manager h4 {
  font-family: 'Orbitron', monospace; color: var(--a);
  margin-bottom: 15px; font-size: 0.9rem;
  display: flex; align-items: center; gap: 8px;
}
.category-tabs {
  display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 15px;
}
.cat-tab {
  padding: 8px 14px; background: var(--inp); border: 1px solid var(--bd);
  border-radius: 8px; color: var(--dm); font-size: 0.75rem; font-weight: 700;
  cursor: pointer; transition: all .3s; font-family: 'Rajdhani', sans-serif;
}
.cat-tab:hover { border-color: var(--a); color: var(--tx); }
.cat-tab.active {
  background: linear-gradient(135deg, rgba(0,212,255,.15), rgba(0,212,255,.05));
  border-color: var(--a); color: var(--a);
  box-shadow: 0 0 15px rgba(0,212,255,.2);
}
.data-list {
  max-height: 300px; overflow-y: auto;
  display: flex; flex-direction: column; gap: 8px;
  margin-bottom: 15px;
}
.data-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px; background: rgba(0,0,0,.2); border-radius: 10px;
  border: 1px solid var(--bd); transition: all .3s;
}
.data-item:hover { border-color: var(--p); background: rgba(255,107,53,.05); }
.data-item-info { flex: 1; }
.data-item-name {
  font-weight: 700; color: var(--tx); font-size: 0.9rem;
  display: flex; align-items: center; gap: 8px;
}
.data-item-meta {
  font-size: 0.7rem; color: var(--dm); margin-top: 4px;
  font-family: 'JetBrains Mono', monospace;
}
.data-item-actions { display: flex; gap: 5px; }
.icon-btn {
  width: 32px; height: 32px; border: none; border-radius: 6px;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: all .3s; font-size: 1rem;
}
.icon-btn.edit { background: rgba(255,215,0,.1); color: var(--s); border: 1px solid rgba(255,215,0,.3); }
.icon-btn.edit:hover { background: rgba(255,215,0,.2); box-shadow: 0 0 10px rgba(255,215,0,.3); }
.icon-btn.delete { background: rgba(255,51,102,.1); color: var(--r); border: 1px solid rgba(255,51,102,.3); }
.icon-btn.delete:hover { background: rgba(255,51,102,.2); box-shadow: 0 0 10px rgba(255,51,102,.3); }

.add-btn {
  width: 100%; padding: 14px; background: linear-gradient(135deg, var(--g), #00cc6a);
  border: none; border-radius: 10px; color: #000;
  font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 1rem;
  cursor: pointer; transition: all .3s; margin-bottom: 10px;
  display: flex; align-items: center; justify-content: center; gap: 8px;
}
.add-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,255,136,.3); }

/* === MODAL === */
.modal-overlay {
  display: none; position: fixed; inset: 0; z-index: 10001;
  background: rgba(0,0,0,.8); backdrop-filter: blur(5px);
  align-items: center; justify-content: center; padding: 20px;
}
.modal-overlay.active { display: flex; }
.modal {
  background: linear-gradient(145deg, var(--cd), var(--cd2));
  border: 2px solid var(--a); border-radius: 20px;
  padding: 30px; width: 100%; max-width: 500px;
  max-height: 90vh; overflow-y: auto;
  box-shadow: 0 20px 60px rgba(0,0,0,.5), 0 0 40px rgba(0,212,255,.2);
  animation: modalIn 0.3s ease;
}
@keyframes modalIn {
  from { opacity: 0; transform: scale(0.9) translateY(20px); }
  to { opacity: 1; transform: none; }
}
.modal h3 {
  font-family: 'Orbitron', monospace; color: var(--a);
  margin-bottom: 20px; text-align: center;
}
.form-group {
  margin-bottom: 15px;
}
.form-group label {
  display: block; font-size: 0.75rem; color: var(--dm);
  margin-bottom: 6px; text-transform: uppercase; letter-spacing: 1px;
  font-weight: 600;
}
.form-group input,
.form-group select,
.form-group textarea {
  width: 100%; padding: 12px 15px; background: var(--inp);
  border: 2px solid var(--bd); border-radius: 10px; color: var(--tx);
  font-family: 'Rajdhani', sans-serif; font-size: 1rem;
  outline: none; transition: all .3s;
}
.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  border-color: var(--a); box-shadow: 0 0 20px rgba(0,212,255,.2);
}
.form-group textarea {
  min-height: 80px; resize: vertical;
}
.form-row {
  display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
}
.dynamic-fields {
  background: rgba(0,0,0,.2); border-radius: 10px;
  padding: 15px; margin-bottom: 15px;
}
.dynamic-fields h4 {
  font-size: 0.8rem; color: var(--s); margin-bottom: 10px;
  display: flex; align-items: center; justify-content: space-between;
}
.field-row {
  display: flex; gap: 10px; margin-bottom: 8px; align-items: center;
}
.field-row input { flex: 1; }
.field-row button {
  padding: 8px 12px; background: var(--r); border: none;
  border-radius: 6px; color: white; cursor: pointer;
  font-size: 0.8rem;
}
.add-field-btn {
  padding: 8px 16px; background: rgba(0,255,136,.1);
  border: 1px dashed var(--g); border-radius: 8px;
  color: var(--g); font-size: 0.8rem; cursor: pointer;
  width: 100%; margin-top: 5px;
}
.modal-actions {
  display: flex; gap: 10px; margin-top: 20px;
}
.modal-actions button {
  flex: 1; padding: 14px; border: none; border-radius: 10px;
  font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 1rem;
  cursor: pointer; transition: all .3s;
}
.modal-actions .save {
  background: linear-gradient(135deg, var(--g), #00cc6a); color: #000;
}
.modal-actions .save:hover {
  transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,255,136,.3);
}
.modal-actions .cancel {
  background: var(--bd); color: var(--tx);
}
.modal-actions .cancel:hover {
  background: var(--r); color: white;
}

/* === MAIN APP === */
#main-app {
  filter: blur(10px); pointer-events: none; opacity: 0.3;
  transition: all .5s ease;
}
#main-app.unlocked {
  filter: none; pointer-events: all; opacity: 1;
}

/* === RESTUL STILURILOR ORIGINALE === */
#particles { position:fixed; inset:0; z-index:0; pointer-events:none }
body::before {
  content:''; position:fixed; inset:0; z-index:0; pointer-events:none;
  background:
    radial-gradient(ellipse at 10% 10%, rgba(255,107,53,.06) 0%, transparent 40%),
    radial-gradient(ellipse at 90% 20%, rgba(0,212,255,.05) 0%, transparent 40%),
    radial-gradient(ellipse at 50% 90%, rgba(255,215,0,.04) 0%, transparent 40%),
    radial-gradient(ellipse at 70% 50%, rgba(180,77,255,.03) 0%, transparent 40%);
}
body::after {
  content:''; position:fixed; inset:0; z-index:0; pointer-events:none;
  background-image:
    linear-gradient(rgba(255,107,53,.012) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,212,255,.012) 1px, transparent 1px);
  background-size: 60px 60px;
}
.ct { max-width:1020px; margin:0 auto; padding:30px 20px; position:relative; z-index:1 }
.hd { text-align:center; margin-bottom:28px; position:relative; padding:30px 0 }
.hd::before {
  content:''; position:absolute; top:0; left:50%; transform:translateX(-50%);
  width:80px; height:3px;
  background: linear-gradient(90deg, transparent, var(--p), var(--s), var(--a), transparent);
}
.hd::after {
  content:''; position:absolute; bottom:0; left:50%; transform:translateX(-50%);
  width:60%; height:1px;
  background: linear-gradient(90deg, transparent, var(--bd), transparent);
}
.hd .logo {
  font-family: 'Orbitron', monospace; font-size: clamp(1.8rem,5vw,2.8rem);
  font-weight: 900; letter-spacing: 6px; text-transform: uppercase;
  background: linear-gradient(135deg, var(--p) 0%, var(--s) 40%, var(--a) 70%, var(--g) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 0 30px var(--glow-p));
  animation: logoGlow 4s ease-in-out infinite alternate;
}
@keyframes logoGlow {
  0% { filter: drop-shadow(0 0 20px var(--glow-p)) }
  50% { filter: drop-shadow(0 0 30px var(--glow-s)) }
  100% { filter: drop-shadow(0 0 20px var(--glow-a)) }
}
.hd .sub {
  font-family: 'JetBrains Mono', monospace; font-size: .8rem;
  color: var(--dm); letter-spacing: 4px; margin-top: 8px; text-transform: uppercase;
}
.hd .version {
  display: inline-block; margin-top:10px; padding: 4px 14px;
  background: linear-gradient(135deg, rgba(255,107,53,.15), rgba(0,212,255,.1));
  border: 1px solid rgba(255,107,53,.3); border-radius: 20px;
  font-family: 'JetBrains Mono', monospace; font-size: .65rem;
  color: var(--a); letter-spacing: 2px;
}
.br {
  display:flex; justify-content:center; align-items:center; gap:16px; flex-wrap:wrap;
  margin: 0 0 24px; padding: 14px 20px;
  background: linear-gradient(135deg, rgba(255,215,0,.08), rgba(255,107,53,.04), rgba(0,212,255,.04));
  border: 1px solid rgba(255,215,0,.25); border-radius: 14px;
  position:relative; overflow:hidden;
}
.br::before {
  content:''; position:absolute; top:0; left:0; width:100%; height:2px;
  background: linear-gradient(90deg, var(--p), var(--s), var(--a), var(--g));
}
.br::after {
  content:''; position:absolute; bottom:0; left:0; width:100%; height:1px;
  background: linear-gradient(90deg, transparent, rgba(255,215,0,.2), transparent);
}
.br .tag { color:var(--s); font-family:'Orbitron',monospace; font-weight:700; font-size:.85rem; letter-spacing:1px }
.br .sep { color:rgba(255,255,255,.15); font-size:.8rem }
.br a { color:var(--a); text-decoration:none; font-family:'JetBrains Mono',monospace; font-weight:700; font-size:.85rem; transition:.3s }
.br a:hover { color:var(--s); text-shadow:0 0 15px var(--glow-a) }
.br .ref { color:var(--g); font-family:'Orbitron',monospace; font-weight:700; font-size:.85rem }
.br .srv { color:var(--p); font-family:'Rajdhani',sans-serif; font-weight:700; font-size:.85rem; text-transform:uppercase; letter-spacing:2px }
.tabs {
  display:flex; gap:6px; flex-wrap:wrap; justify-content:center;
  margin-bottom:24px; padding:14px 12px;
  background: linear-gradient(180deg, var(--cd), var(--bg2));
  border: 1px solid var(--bd); border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0,0,0,.3);
}
.tb {
  padding:11px 20px; font-family:'Rajdhani',sans-serif; font-size:.92rem; font-weight:700;
  border:2px solid var(--bd); border-radius:10px;
  background: var(--inp); color:var(--dm);
  cursor:pointer; transition:all .3s ease;
  display:flex; align-items:center; gap:6px; letter-spacing:.5px;
  position:relative; overflow:hidden;
}
.tb::before {
  content:''; position:absolute; bottom:0; left:50%; width:0; height:2px;
  background:var(--s); transition:all .3s; transform:translateX(-50%);
}
.tb:hover { border-color:var(--p); color:var(--tx); transform:translateY(-2px); box-shadow:0 4px 15px rgba(255,107,53,.15) }
.tb:hover::before { width:60% }
.tb.on {
  border-color:var(--s); color:var(--s);
  background: linear-gradient(135deg, rgba(255,215,0,.12), rgba(255,107,53,.06));
  box-shadow: 0 0 20px rgba(255,215,0,.2), inset 0 0 20px rgba(255,215,0,.05);
}
.tb.on::before { width:80%; background:var(--s) }
.pn { display:none; animation:panelIn .5s cubic-bezier(.22,1,.36,1) }
.pn.on { display:block }
@keyframes panelIn { from{opacity:0;transform:translateY(15px)} to{opacity:1;transform:none} }
.sc {
  background: linear-gradient(145deg, var(--cd), var(--cd2));
  border: 1px solid var(--bd); border-radius:16px;
  padding:24px; margin-bottom:18px;
  position:relative; overflow:hidden;
  box-shadow: 0 4px 15px rgba(0,0,0,.2);
}
.sc::before {
  content:''; position:absolute; top:0; left:0; width:100%; height:3px;
  background: linear-gradient(90deg, var(--p), var(--s), var(--a));
}
.sc.hl { border-color: rgba(255,107,53,.4); box-shadow: 0 0 30px rgba(255,107,53,.1) }
.sc.gn { border-color: rgba(0,255,136,.3); box-shadow: 0 0 30px rgba(0,255,136,.08) }
.sc.gn::before { background: linear-gradient(90deg, var(--g), var(--a), var(--g)) }
.sc.vt { border-color: rgba(180,77,255,.3); box-shadow: 0 0 30px rgba(180,77,255,.08) }
.sc.vt::before { background: linear-gradient(90deg, var(--violet), var(--r), var(--violet)) }
.st {
  font-family: 'Orbitron', monospace; font-size: .85rem;
  color: var(--p); letter-spacing: 2px; text-align:center;
  font-weight: 700; text-transform: uppercase; margin-bottom:16px;
  text-shadow: 0 0 20px var(--glow-p);
}
.st.cyan { color:var(--a); text-shadow:0 0 20px var(--glow-a) }
.st.green { color:var(--g); text-shadow:0 0 20px var(--glow-g) }
.st.gold { color:var(--s); text-shadow:0 0 20px var(--glow-s) }
.ir { display:flex; flex-wrap:wrap; align-items:center; justify-content:center; gap:20px }
.ig { display:flex; flex-direction:column; align-items:center; gap:8px }
.ig label {
  font-family:'JetBrains Mono',monospace; font-size:.72rem; font-weight:600;
  color:var(--a); letter-spacing:1.5px; text-transform:uppercase;
}
.ig input, .ig select {
  padding:14px 18px; font-family:'Orbitron',monospace; font-size:1.1rem; font-weight:700;
  text-align:center; background:var(--inp);
  border:2px solid rgba(0,212,255,.4); border-radius:12px;
  color:var(--a); outline:none; transition:all .3s; min-width:180px;
}
.ig input:focus, .ig select:focus {
  border-color:var(--s); box-shadow:0 0 30px var(--glow-a); color:var(--s);
}
.ig select option { background:var(--cd); color:var(--tx) }
.gr { display:grid; gap:14px; margin:14px 0 }
.g2 { grid-template-columns: repeat(auto-fit, minmax(190px, 1fr)) }
.g3 { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)) }
.g4 { grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)) }
.mc {
  background: linear-gradient(145deg, var(--cd), #0a0a16);
  border: 2px solid var(--bd); border-radius:14px;
  padding:20px 16px; text-align:center;
  transition: all .35s cubic-bezier(.22,1,.36,1);
  position:relative; overflow:hidden;
}
.mc::before { content:''; position:absolute; top:0; left:0; width:100%; height:3px }
.mc:hover { transform:translateY(-4px) }
.mc .ic { font-size:2.2rem; margin-bottom:8px; filter:drop-shadow(0 0 8px rgba(255,255,255,.2)) }
.mc .nm {
  font-family:'JetBrains Mono',monospace; font-size:.68rem;
  color:var(--dm); text-transform:uppercase; letter-spacing:1.5px; margin-bottom:6px;
}
.mc .vl { font-family:'Orbitron',monospace; font-size:1.8rem; font-weight:900; transition:all .3s }
.mc .un { font-size:.68rem; color:var(--dm); margin-top:3px }
.mc.cu { border-color:var(--cu) }.mc.cu::before { background:linear-gradient(90deg,var(--cu),#d4956a) }.mc.cu .vl { color:var(--cu) }
.mc.cu:hover { box-shadow:0 8px 30px rgba(184,115,51,.25) }
.mc.lead { border-color:var(--pb) }.mc.lead::before { background:linear-gradient(90deg,var(--pb),#8a9bac) }.mc.lead .vl { color:var(--pb) }
.mc.lead:hover { box-shadow:0 8px 30px rgba(107,123,140,.25) }
.mc.gp { border-color:var(--gunp) }.mc.gp::before { background:linear-gradient(90deg,#555,var(--gunp)) }.mc.gp .vl { color:var(--gunp) }
.mc.gp:hover { box-shadow:0 8px 30px rgba(122,122,122,.2) }
.mc.gn { border-color:var(--g) }.mc.gn::before { background:var(--g) }.mc.gn .vl { color:var(--g) }
.mc.gn:hover { box-shadow:0 8px 30px var(--glow-g) }
.mc.gl { border-color:var(--s) }.mc.gl::before { background:var(--s) }.mc.gl .vl { color:var(--s) }
.mc.gl:hover { box-shadow:0 8px 30px var(--glow-s) }
.mc.rd { border-color:var(--r) }.mc.rd::before { background:var(--r) }.mc.rd .vl { color:var(--r) }
.mc.rd:hover { box-shadow:0 8px 30px rgba(255,51,102,.25) }
.mc.bl { border-color:var(--a) }.mc.bl::before { background:var(--a) }.mc.bl .vl { color:var(--a) }
.mc.bl:hover { box-shadow:0 8px 30px var(--glow-a) }
.mc.vt { border-color:var(--violet) }.mc.vt::before { background:var(--violet) }.mc.vt .vl { color:var(--violet) }
.mc.vt:hover { box-shadow:0 8px 30px rgba(180,77,255,.25) }
.sm {
  background: linear-gradient(135deg, #13132a, #0d0d1a);
  border: 2px solid var(--p); border-radius:16px;
  padding:24px; margin-top:18px; position:relative; overflow:hidden;
  box-shadow: 0 0 30px rgba(255,107,53,.08);
}
.sm::before {
  content:''; position:absolute; top:0; left:0; width:100%; height:4px;
  background: linear-gradient(90deg, var(--p), var(--s), var(--a), var(--g));
}
.sm-t {
  font-family:'Orbitron',monospace; font-size:.9rem;
  color:var(--p); letter-spacing:2px; text-align:center;
  text-transform:uppercase; font-weight:700; margin-bottom:16px;
}
.sg { display:grid; grid-template-columns:repeat(auto-fit, minmax(145px,1fr)); gap:12px }
.si {
  text-align:center; padding:16px 12px;
  background: rgba(255,107,53,.06); border-radius:12px;
  border: 1px solid rgba(255,107,53,.15); transition:all .3s;
}
.si:hover { background:rgba(255,107,53,.1); border-color:rgba(255,107,53,.35); transform:translateY(-2px) }
.si .lb {
  font-family:'JetBrains Mono',monospace; font-size:.62rem;
  color:var(--dm); text-transform:uppercase; letter-spacing:1.5px; margin-bottom:5px;
}
.si .sv { font-family:'Orbitron',monospace; font-size:1.15rem; font-weight:900; color:var(--p) }
.si .sv.gl { color:var(--s) } .si .sv.gn { color:var(--g) }
.rc {
  margin-top:14px; padding:14px;
  background: rgba(255,255,255,.02); border-radius:10px;
  border: 1px dashed rgba(255,215,0,.2);
  text-align:center; color:var(--dm); font-size:.85rem; line-height:1.7;
}
.rc b { color:var(--s); font-weight:700 }
.bs { display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin:12px 0 }
.bt {
  padding:14px 20px; font-family:'Rajdhani',sans-serif; font-size:1rem; font-weight:700;
  border:2px solid var(--bd); border-radius:12px;
  background:var(--inp); color:var(--dm);
  cursor:pointer; transition:all .3s;
  display:flex; flex-direction:column; align-items:center; gap:4px;
  position:relative; overflow:hidden;
}
.bt::after {
  content:''; position:absolute; bottom:0; left:0; width:100%; height:2px;
  background:var(--s); transform:scaleX(0); transition:.3s;
}
.bt:hover { border-color:var(--p); color:var(--tx); transform:translateY(-3px) }
.bt:hover::after { transform:scaleX(.5) }
.bt.on {
  border-color:var(--s); color:var(--s);
  background: linear-gradient(135deg, rgba(255,215,0,.15), rgba(255,107,53,.06));
  box-shadow: 0 0 20px rgba(255,215,0,.2);
}
.bt.on::after { transform:scaleX(.8) }
.bt small { font-family:'JetBrains Mono',monospace; font-size:.65rem; opacity:.6 }
.ib {
  padding:11px 16px; background:rgba(0,212,255,.05);
  border:1px solid rgba(0,212,255,.15); border-radius:10px;
  text-align:center; color:var(--a);
  font-family:'JetBrains Mono',monospace; font-size:.78rem; margin:10px 0;
}
table { width:100%; border-collapse:collapse; margin:12px 0 }
th, td { padding:11px 10px; text-align:left; border-bottom:1px solid rgba(255,255,255,.05); font-size:.82rem }
th {
  font-family:'JetBrains Mono',monospace; color:var(--a); font-weight:600;
  text-transform:uppercase; letter-spacing:1.5px; font-size:.68rem;
  background: rgba(0,212,255,.04); border-bottom:2px solid rgba(0,212,255,.15);
}
td { color:var(--tx) }
tr:hover td { background:rgba(255,107,53,.03) }
td b { color:var(--s) }
.cat-badge {
  display:inline-block; padding:3px 10px; border-radius:6px;
  font-family:'JetBrains Mono',monospace; font-size:.65rem;
  font-weight:600; letter-spacing:1px; text-transform:uppercase;
}
.cat-badge.pistol { background:rgba(0,212,255,.1); color:var(--a); border:1px solid rgba(0,212,255,.3) }
.cat-badge.smg { background:rgba(0,255,136,.1); color:var(--g); border:1px solid rgba(0,255,136,.3) }
.cat-badge.rifle { background:rgba(255,107,53,.1); color:var(--p); border:1px solid rgba(255,107,53,.3) }
.cat-badge.shotgun { background:rgba(255,51,102,.1); color:var(--r); border:1px solid rgba(255,51,102,.3) }
.cat-badge.heavy { background:rgba(255,215,0,.1); color:var(--s); border:1px solid rgba(255,215,0,.3) }
.cat-badge.mg { background:rgba(180,77,255,.1); color:var(--violet); border:1px solid rgba(180,77,255,.3) }
.cat-badge.special { background:rgba(255,255,255,.05); color:var(--tx); border:1px solid rgba(255,255,255,.15) }
.cat-groups { display:flex; gap:10px; justify-content:center; margin-bottom:8px }
.cat-group-btn {
  flex:1; max-width:300px; padding:16px 24px; text-align:center;
  font-family:'Orbitron',monospace; font-size:.9rem; font-weight:800;
  letter-spacing:2px; text-transform:uppercase;
  border:2px solid var(--bd); border-radius:14px;
  background: linear-gradient(145deg, var(--cd), var(--cd2));
  color: var(--dm); cursor:pointer; transition:all .4s;
  position:relative; overflow:hidden;
}
.cat-group-btn::before {
  content:''; position:absolute; top:0; left:0; width:100%; height:3px;
  background: linear-gradient(90deg, transparent, var(--bd), transparent);
  transition:all .4s;
}
.cat-group-btn:hover { transform:translateY(-3px); border-color:rgba(255,255,255,.2) }
.cat-group-btn.mafie.on {
  border-color: var(--r); color: var(--r);
  background: linear-gradient(145deg, rgba(255,51,102,.12), rgba(180,77,255,.06));
  box-shadow: 0 0 30px rgba(255,51,102,.15), inset 0 0 30px rgba(255,51,102,.04);
}
.cat-group-btn.mafie.on::before { background: linear-gradient(90deg, var(--r), var(--violet), var(--r)) }
.cat-group-btn.legal.on {
  border-color: var(--g); color: var(--g);
  background: linear-gradient(145deg, rgba(0,255,136,.1), rgba(0,212,255,.05));
  box-shadow: 0 0 30px rgba(0,255,136,.12), inset 0 0 30px rgba(0,255,136,.03);
}
.cat-group-btn.legal.on::before { background: linear-gradient(90deg, var(--g), var(--a), var(--g)) }
.cat-group-btn .cg-icon { font-size:1.4rem; display:block; margin-bottom:4px }
.cat-group-btn .cg-sub {
  font-family:'JetBrains Mono',monospace; font-size:.55rem;
  color: var(--dm); letter-spacing:1px; margin-top:4px; font-weight:400;
}
.cat-panel { display:none; animation:panelIn .5s cubic-bezier(.22,1,.36,1) }
.cat-panel.on { display:block }
.sub-tabs {
  display:flex; gap:6px; flex-wrap:wrap; justify-content:center;
  margin-bottom:22px; padding:12px 10px;
  background: linear-gradient(180deg, rgba(16,16,28,.8), rgba(6,6,16,.6));
  border: 1px solid var(--bd); border-radius:14px;
}
.sub-tabs.mafie { border-color:rgba(255,51,102,.15); box-shadow:0 2px 15px rgba(255,51,102,.05) }
.sub-tabs.legal { border-color:rgba(0,255,136,.15); box-shadow:0 2px 15px rgba(0,255,136,.05) }
.ft {
  text-align:center; padding:28px 20px; color:var(--dm); font-size:.78rem;
  border-top:1px solid var(--bd); margin-top:28px; position:relative;
}
.ft::before {
  content:''; position:absolute; top:0; left:50%; transform:translateX(-50%);
  width:40%; height:1px;
  background:linear-gradient(90deg, transparent, var(--p), transparent);
}
.ft b { color:var(--p) } .ft a { color:var(--a); text-decoration:none }
.ft .copy { font-family:'JetBrains Mono',monospace; font-size:.6rem; color:#333; margin-top:12px; letter-spacing:2px }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.7} }
.up { animation: pulse .3s ease }
@media (max-width:680px) {
  .ct { padding:20px 12px }
  .tb { padding:9px 14px; font-size:.8rem }
  .mc .vl { font-size:1.4rem }
  .ig input, .ig select { min-width:140px; font-size:.95rem }
  .bt { padding:11px 15px; font-size:.9rem }
  .br { gap:10px; padding:10px 14px }
  .hd .logo { letter-spacing:3px }
  #admin-panel { width: calc(100% - 40px); right: 20px; left: 20px; }
  .form-row { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<canvas id="particles"></canvas>

<!-- LOGIN SCREEN -->
<div id="login-screen">
  <div class="login-box" id="login-box">
    <div class="login-logo">üîê ACCES RESTRICTIONAT</div>
    <div class="login-sub">Autentificare necesara pentru Craft Roleplay Calculator</div>
    
    <div id="login-content">
      <a href="#" class="discord-btn" onclick="loginWithDiscord()">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>
        Conectare cu Discord
      </a>
      
      <!-- BUTON PENTRU OWNER (DOAR PENTRU TEST) -->
      <button onclick="simulateOwnerLogin()" style="margin-top: 15px; padding: 12px 24px; background: linear-gradient(135deg, #ff0000, #990000); border: none; border-radius: 10px; color: white; font-family: 'Rajdhani', sans-serif; font-weight: 700; cursor: pointer; box-shadow: 0 0 20px rgba(255,0,0,.3);">
        üëë Login ca OWNER (Test)
      </button>
      
      <p style="margin-top: 20px; color: var(--dm); font-size: 0.85rem;">
        üîí Doar membrii aprobati pot accesa calculatorul.<br>
        Solicitarea ta va fi revizuita de un administrator.
      </p>
    </div>

    <div id="pending-content" style="display: none;">
      <div class="user-info">
        <img src="" alt="Avatar" class="user-avatar" id="pending-avatar">
        <div class="user-details">
          <div class="user-name" id="pending-name">Username</div>
          <div class="user-id" id="pending-id">ID: 000000000</div>
        </div>
      </div>
      <div class="pending-box">
        <h3>‚è≥ Asteapta Aprobare</h3>
        <p>Contul tau este in curs de verificare.<br>
        Vei primi acces imediat ce un administrator iti aproba solicitarea.</p>
      </div>
      <button class="discord-btn" style="margin-top: 15px; background: var(--dm);" onclick="logout()">
        Deconectare
      </button>
    </div>
  </div>
</div>

<!-- ADMIN PANEL -->
<button class="admin-btn" id="admin-toggle" onclick="toggleAdmin()" style="display: none;">
  üõ°Ô∏è Admin Panel
</button>
<div id="admin-panel">
  <h3>üõ°Ô∏è Panou Administrare</h3>
  
  <!-- User Management -->
  <div class="stats">
    <div class="stat-box">
      <div class="num" id="stat-total">0</div>
      <div class="lbl">Total Utilizatori</div>
    </div>
    <div class="stat-box">
      <div class="num" id="stat-approved">0</div>
      <div class="lbl">Aprobati</div>
    </div>
    <div class="stat-box">
      <div class="num" id="stat-pending">0</div>
      <div class="lbl">In Asteptare</div>
    </div>
    <div class="stat-box">
      <div class="num" id="stat-online">1</div>
      <div class="lbl">Online Acum</div>
    </div>
  </div>
  
  <div style="margin-bottom: 10px; font-size: 0.8rem; color: var(--dm);">
    üëë <span id="admin-role" style="color: var(--s); font-weight: 700;">Admin</span>: 
    <span id="admin-name" style="color: var(--s);"></span>
  </div>

  <div style="display: flex; gap: 8px; margin-bottom: 15px;">
    <input type="text" id="search-users" placeholder="Cauta utilizator..." 
           style="flex: 1; padding: 8px 12px; background: var(--inp); border: 1px solid var(--bd); 
                  border-radius: 8px; color: var(--tx); font-family: 'JetBrains Mono', monospace; font-size: 0.8rem;">
  </div>

  <div class="user-list" id="user-list"></div>

  <!-- DATA MANAGER -->
  <div class="data-manager">
    <h4>üì¶ Manager Date Aplicatie</h4>
    
    <div class="category-tabs" id="data-categories">
      <div class="cat-tab active" onclick="switchDataCategory('arme')">üî´ Arme</div>
      <div class="cat-tab" onclick="switchDataCategory('munitie')">üéØ Munitie</div>
      <div class="cat-tab" onclick="switchDataCategory('componente')">‚öôÔ∏è Componente</div>
      <div class="cat-tab" onclick="switchDataCategory('masa')">üî® Masa Craft</div>
      <div class="cat-tab" onclick="switchDataCategory('locatii')">üìç Locatii</div>
    </div>

    <button class="add-btn" onclick="openAddModal()">
      ‚ûï Adauga Intrare Noua
    </button>

    <div class="data-list" id="data-list"></div>
  </div>
  
  <button onclick="exportData()" style="width: 100%; margin-top: 10px; padding: 10px; 
          background: linear-gradient(135deg, var(--a), #0088cc); border: none; border-radius: 8px; 
          color: white; font-family: 'Rajdhani', sans-serif; font-weight: 700; cursor: pointer;">
    üíæ Exporta Datele (Backup)
  </button>
  
  <button onclick="resetToDefault()" style="width: 100%; margin-top: 10px; padding: 10px; 
          background: rgba(255,0,0,.2); border: 1px solid rgba(255,0,0,.3); border-radius: 8px; 
          color: var(--r); font-family: 'Rajdhani', sans-serif; font-weight: 700; cursor: pointer;">
    üîÑ Reset la Valori Default
  </button>
  
  <button onclick="toggleAdmin()" style="width: 100%; margin-top: 10px; padding: 10px; 
          background: var(--bd); border: none; border-radius: 8px; color: var(--tx); 
          font-family: 'Rajdhani', sans-serif; font-weight: 700; cursor: pointer;">
    Inchide Panoul
  </button>
</div>

<!-- MODAL -->
<div class="modal-overlay" id="modal-overlay">
  <div class="modal" id="modal">
    <h3 id="modal-title">Adauga Intrare Noua</h3>
    <div id="modal-content"></div>
    <div class="modal-actions">
      <button class="save" onclick="saveData()">Salveaza</button>
      <button class="cancel" onclick="closeModal()">Anuleaza</button>
    </div>
  </div>
</div>

<!-- MAIN APP -->
<div id="main-app">
  <div class="ct">

  <header class="hd">
    <div class="logo">CRAFT ROLEPLAY</div>
    <div class="sub">Calculator Profesional ‚Äî B-Zone V</div>
    <div class="version">v3.0 ‚Äî 2026 EDITION</div>
  </header>

  <div class="br" style="justify-content: space-between;">
    <div style="display: flex; align-items: center; gap: 10px;">
      <img id="user-avatar" src="" style="width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--g);">
      <div>
        <div style="font-size: 0.75rem; color: var(--dm);">Bine ai venit,</div>
        <div id="user-display-name" style="font-weight: 700; color: var(--s); font-family: 'Orbitron', monospace;"></div>
        <div id="user-role-badge" style="font-size: 0.65rem; margin-top: 2px;"></div>
      </div>
    </div>
    <button onclick="logout()" style="padding: 8px 16px; background: rgba(255,51,102,.1); border: 1px solid rgba(255,51,102,.3); 
            border-radius: 8px; color: var(--r); font-family: 'Rajdhani', sans-serif; font-weight: 700; 
            cursor: pointer; font-size: 0.85rem; transition: all .3s;" onmouseover="this.style.background='rgba(255,51,102,.2)'" 
            onmouseout="this.style.background='rgba(255,51,102,.1)'">
      Deconectare
    </button>
  </div>

  <div class="br">
    <span class="tag">üéÆ COD 5% ROBERTO</span>
    <span class="sep">‚Ä¢</span>
    <a href="http://v.b-zone.ro" target="_blank">v.b-zone.ro</a>
    <span class="sep">‚Ä¢</span>
    <span class="ref">REF 6218</span>
    <span class="sep">‚Ä¢</span>
    <span class="srv">üåê Server B-ZONE</span>
  </div>

  <div class="cat-groups">
    <div class="cat-group-btn mafie on" onclick="showGroup('mafie')">
      <span class="cg-icon">üî´</span>CRAFT MAFIE
      <div class="cg-sub">Cocaina ‚Ä¢ Gloante ‚Ä¢ Arme ‚Ä¢ Componente</div>
    </div>
    <div class="cat-group-btn legal" onclick="showGroup('legal')">
      <span class="cg-icon">üî®</span>CRAFT LEGAL
      <div class="cg-sub">Masa Craft ‚Ä¢ Locatii</div>
    </div>
  </div>

  <div class="cat-panel on" id="g_mafie">
    <div class="sub-tabs mafie" id="mafie_tabs"></div>

    <div class="pn on" id="p_cocaina">
      <div class="sc gn">
        <div class="st green">üíé Calculator Procesare Cocaina</div>
        <div class="ir">
          <div class="ig">
            <label>üåø Numar frunze de coca</label>
            <input type="number" id="cI" placeholder="560" min="0" value="560" oninput="cC()">
          </div>
        </div>
        <div class="ib">‚ú® Introdu numarul de frunze pentru a calcula intregul proces de la materie prima la produs final</div>
      </div>
      <div class="gr g3" id="cCards"></div>
      <div class="sm">
        <div class="sm-t">üìä Sumar Final</div>
        <div class="sg">
          <div class="si"><div class="lb">Total KG Procesate</div><div class="sv" id="cK">0.00</div></div>
          <div class="si"><div class="lb">Total Plicuri</div><div class="sv gl" id="cP">0</div></div>
          <div class="si"><div class="lb">Profit Estimat</div><div class="sv gn" id="cF">$0</div></div>
        </div>
        <div class="rc">üìã Flux: <b>üåø Frunze ‚Üí üß™ Sticle ‚Üí üç≥ Tavi ‚Üí üß± Brichete ‚Üí üëú Pungi ‚Üí üì¶ Plicuri</b></div>
      </div>
    </div>

    <div class="pn" id="p_gloante">
      <div class="sc hl">
        <div class="st">üéØ Selecteaza Calibrul</div>
        <div class="bs" id="bBtns"></div>
      </div>
      <div class="sc">
        <div class="ir">
          <div class="ig">
            <label>üî¢ Cate gloante vrei?</label>
            <input type="number" id="bI" placeholder="100" min="0" value="100" oninput="cB()">
          </div>
          <div class="mc bl"><div class="nm">Carcase Necesare</div><div class="vl" id="bC">0</div></div>
          <div class="mc gn"><div class="nm">Gloante Produse</div><div class="vl" id="bP">0</div></div>
        </div>
      </div>
      <div class="st cyan">üì¶ Materiale Necesare</div>
      <div class="gr g3">
        <div class="mc cu"><div class="ic">ü•â</div><div class="nm">Cupru</div><div class="vl" id="bCu">0</div><div class="un">bucati</div></div>
        <div class="mc lead"><div class="ic">‚öôÔ∏è</div><div class="nm">Plumb</div><div class="vl" id="bPb">0</div><div class="un">bucati</div></div>
        <div class="mc gp"><div class="ic">üí•</div><div class="nm">Praf de Pusca</div><div class="vl" id="bPr">0</div><div class="un">bucati</div></div>
      </div>
      <div class="sm">
        <div class="sm-t">üìä Sumar Productie</div>
        <div class="sg">
          <div class="si"><div class="lb">Tip Selectat</div><div class="sv gl" id="bT">9mm</div></div>
          <div class="si"><div class="lb">Gloante Cerute</div><div class="sv" id="bQ">0</div></div>
          <div class="si"><div class="lb">Gloante Produse</div><div class="sv gn" id="bTP">0</div></div>
          <div class="si"><div class="lb">Total Materiale</div><div class="sv" id="bTM">0</div></div>
        </div>
        <div class="rc">üìã Reteta: <b id="bR"></b></div>
      </div>
    </div>

    <div class="pn" id="p_arme">
      <div class="sc hl">
        <div class="st">üî´ Calculator Craft Arme</div>
        <div class="ir">
          <div class="ig"><label>Selecteaza Arma</label><select id="aS" onchange="cA()"></select></div>
          <div class="ig"><label>Cantitate</label><input type="number" id="aQ" value="1" min="1" max="100" oninput="cA()"></div>
        </div>
      </div>
      <div id="aR"></div>
    </div>

    <div class="pn" id="p_comp">
      <div class="sc hl"><div class="st">‚öôÔ∏è Componente & Materiale Arme</div></div>
      <div id="cT"></div>
    </div>

  </div>

  <div class="cat-panel" id="g_legal">
    <div class="sub-tabs legal" id="legal_tabs"></div>

    <div class="pn" id="p_masa">
      <div class="sc hl"><div class="st gold">üî® Retete Masa de Craft</div></div>
      <div id="mT"></div>
    </div>

    <div class="pn" id="p_loc">
      <div class="sc hl"><div class="st cyan">üìç Locatii Materiale</div></div>
      <div id="lT"></div>
    </div>

  </div>

  <footer class="ft">
    <p>Calculator pentru server <b>B-ZONE V</b> ‚Äî GTA 5 RolePlay</p>
    <p style="margin-top:8px">üéÆ <b>COD 5% ROBERTO</b> | <a href="http://v.b-zone.ro">v.b-zone.ro</a> | <b>REF 6218</b></p>
    <p class="copy">CRAFT ROLEPLAY 2026 ‚Äî TOATE DREPTURILE REZERVATE</p>
  </footer>

  </div>
</div>

<script>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ‚ñà‚ñà‚ñà  CONFIGURATIE OWNER  ‚ñà‚ñà‚ñà
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

// üî¥ ID-UL TƒÇU DISCORD - OWNER/ADMIN AUTOMAT
const OWNER_ID = '1077872559422439444';

// Configurare Discord OAuth2
const DISCORD_CONFIG = {
  CLIENT_ID: '1461666992023928998', // ‚Üê √énlocuie»ôte cu Client ID-ul tƒÉu
  REDIRECT_URI: window.location.origin + window.location.pathname,
  SCOPE: 'identify'
};

// Lista de admini (ID-uri Discord) - po»õi adƒÉuga mai mul»õi
const ADMIN_IDS = [OWNER_ID];

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ‚ñà‚ñà‚ñà  SISTEM DE DATE EDITABIL  ‚ñà‚ñà‚ñà
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

const DEFAULT_DATA = {
  MUNITIE: {
    "9mm": { gpc:30, cu:1, pb:1, pr:1, ret:"1 Cupru + 1 Plumb + 1 Praf de Pusca = 30 gloante", cat:"Pistol / SMG" },
    "7.62mm": { gpc:30, cu:2, pb:2, pr:2, ret:"2 Cupru + 2 Plumb + 2 Praf de Pusca = 30 gloante", cat:"Rifle / MG" },
    "7.65mm": { gpc:20, cu:2, pb:2, pr:2, ret:"2 Cupru + 2 Plumb + 2 Praf de Pusca = 20 gloante", cat:"Special (Navy)" },
    ".38 Magnum": { gpc:20, cu:2, pb:2, pr:3, ret:"2 Cupru + 2 Plumb + 3 Praf de Pusca = 20 gloante", cat:"Revolver / Shotgun" },
  },
  ARME: {
    "Combat Pistol": { mun:"9mm", piese:{"Piese Arme":1,"Teava Pistol":1,"Corp Pistol":1}, cat:"Pistol" },
    "Machine Pistol": { mun:"9mm", piese:{"Piese Arme":1,"Teava Pistol":1,"Corp Pistol":1,"Teava SMG":1}, cat:"Pistol" },
    "Micro SMG": { mun:"9mm", piese:{"Piese Arme":1,"Teava SMG":1,"Corp SMG":1,"Teava Rifle":1,"Butstock":1}, cat:"SMG" },
    "SMG MK2": { mun:"9mm", piese:{"Piese Arme":1,"Teava SMG":1,"Corp SMG":1,"Teava Rifle":1,"Butstock":1}, cat:"SMG" },
    "(DB)": { mun:".38 Magnum", piese:{"Piese Arme":1,"Teava Pistol":1,"Corp Pistol":1,"Teava Rifle":1,"Corp Rifle":1,"Butstock":1,"Blueprint":1,"Lingou Aur":1}, cat:"Shotgun" },
    "(AK)": { mun:"7.62mm", piese:{"Piese Arme":3,"Teava Rifle":1,"Corp Rifle":1,"Butstock":1,"Teava SMG":1,"Corp SMG":1,"Teava Pistol":1,"Corp Pistol":1,"Blueprint":1}, cat:"Rifle" },
  },
  COMP: {
    "Piese de Arme": { mat:{"Arc":"1x Arc","Otel":"1x Otel","Plastic":"1x Plastic","Scrap":"2x Scrap"}, desc:"Componenta de baza pentru orice arma" },
    "Arc": { mat:{"Fier":"1x Fier","Carbune":"1x Carbune"}, desc:"Arc metalic pentru mecanisme" },
    "Plumb": { mat:{"Aluminiu":"1x Aluminiu","Plumb Brut":"4x Plumb"}, desc:"Plumb pentru munitie" },
  },
  MATARME: {
    "Teava Pistol": { pa:1, cat:"Pistol" },
    "Corp Pistol": { pa:1, cat:"Pistol" },
    "Teava SMG": { pa:2, cat:"SMG" },
    "Corp SMG": { pa:2, cat:"SMG" },
  },
  MASA: {
    "Tarnacop": { mat:["5x Cupru","5x Fier","5x Otel","2x Aur + 3x Otel","1x Diamant + 2x Aur"], cat:"Unelte" },
    "Topor": { mat:["5x Cupru","5x Fier","5x Otel","2x Aur + 3x Otel","1x Diamant + 2x Aur"], cat:"Unelte" },
    "Undita": { mat:["5x Plastic","3x Cupru","3x Aluminiu","3x Fier"], cat:"Unelte" },
  },
  LOC: {
    "Mina de Fier": { mat:["Fier","Carbune","Aur"], emoji:"‚õ∞Ô∏è", desc:"Job: Miner" },
    "Mina de Sulf": { mat:["Sulf","Plumb"], emoji:"üåã", desc:"Job: Miner" },
    "Mina de Cupru": { mat:["Cupru","Aluminiu","Carbune"], emoji:"üèîÔ∏è", desc:"Job: Miner" },
  }
};

function loadData() {
  const saved = localStorage.getItem('craft_app_data');
  if (saved) return JSON.parse(saved);
  return JSON.parse(JSON.stringify(DEFAULT_DATA));
}

function saveAppData() {
  localStorage.setItem('craft_app_data', JSON.stringify(APP_DATA));
}

let APP_DATA = loadData();
let currentDataCategory = 'arme';
let editingItem = null;

let MUNITIE = APP_DATA.MUNITIE;
let ARME = APP_DATA.ARME;
let COMP = APP_DATA.COMP;
let MATARME = APP_DATA.MATARME;
let MASA = APP_DATA.MASA;
let LOC = APP_DATA.LOC;

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ‚ñà‚ñà‚ñà  SISTEM AUTHENTIFICARE  ‚ñà‚ñà‚ñà
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

let users = JSON.parse(localStorage.getItem('craft_users') || '[]');
let currentUser = JSON.parse(localStorage.getItem('craft_current_user') || 'null');

// üî¥ LOGIN CA OWNER (PENTRU TEST)
function simulateOwnerLogin() {
  const ownerUser = {
    id: OWNER_ID,
    username: 'OWNER',
    avatar: 'https://cdn.discordapp.com/embed/avatars/0.png',
    discriminator: '0000',
    approved: true,
    isAdmin: true,
    isOwner: true,
    joinedAt: new Date().toISOString()
  };
  
  saveUser(ownerUser);
  currentUser = ownerUser;
  localStorage.setItem('craft_current_user', JSON.stringify(currentUser));
  
  checkAccess();
  showNotification('üëë Te-ai logat ca OWNER!');
}

// üî¥ LOGIN REAL CU DISCORD
function loginWithDiscord() {
  // Pentru produc»õie, decomenteazƒÉ:
  // const url = `https://discord.com/api/oauth2/authorize?client_id=${DISCORD_CONFIG.CLIENT_ID}&redirect_uri=${encodeURIComponent(DISCORD_CONFIG.REDIRECT_URI)}&response_type=token&scope=${DISCORD_CONFIG.SCOPE}`;
  // window.location.href = url;
  
  // Pentru test, folose»ôte simulateOwnerLogin sau simulare normalƒÉ
  alert('Pentru test, folose»ôte butonul "Login ca OWNER"\n\nPentru Discord real, configureazƒÉ CLIENT_ID √Æn cod.');
}

// ProceseazƒÉ callback OAuth2
function handleDiscordCallback() {
  const fragment = new URLSearchParams(window.location.hash.slice(1));
  const accessToken = fragment.get('access_token');
  
  if (accessToken) {
    fetch('https://discord.com/api/users/@me', {
      headers: { 'Authorization': `Bearer ${accessToken}` }
    })
    .then(res => res.json())
    .then(user => {
      const isOwner = user.id === OWNER_ID;
      const userData = {
        id: user.id,
        username: user.username,
        avatar: user.avatar 
          ? `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`
          : `https://cdn.discordapp.com/embed/avatars/${user.discriminator % 5}.png`,
        discriminator: user.discriminator,
        approved: isOwner || false, // Owner e aprobat automat
        isAdmin: isOwner || false,  // Owner e admin automat
        isOwner: isOwner,
        joinedAt: new Date().toISOString()
      };
      
      saveUser(userData);
      currentUser = userData;
      localStorage.setItem('craft_current_user', JSON.stringify(currentUser));
      
      window.history.replaceState({}, document.title, window.location.pathname);
      checkAccess();
      
      if (isOwner) {
        showNotification('üëë Bine ai venit, OWNER!');
      }
    })
    .catch(err => {
      console.error('Eroare la autentificare:', err);
      alert('Eroare la conectarea cu Discord. √éncearcƒÉ din nou.');
    });
  }
}

function saveUser(userData) {
  const existingIndex = users.findIndex(u => u.id === userData.id);
  if (existingIndex >= 0) {
    // PƒÉstreazƒÉ drepturile existente sau acordƒÉ drepturi de owner
    const existing = users[existingIndex];
    userData.approved = existing.approved || userData.isOwner;
    userData.isAdmin = existing.isAdmin || userData.isOwner;
    userData.isOwner = existing.isOwner || userData.id === OWNER_ID;
    users[existingIndex] = userData;
  } else {
    // VerificƒÉ dacƒÉ e owner la prima logare
    if (userData.id === OWNER_ID) {
      userData.approved = true;
      userData.isAdmin = true;
      userData.isOwner = true;
    }
    users.push(userData);
  }
  localStorage.setItem('craft_users', JSON.stringify(users));
}

function checkAccess() {
  if (!currentUser) {
    showLoginScreen();
    return;
  }
  
  // VerificƒÉ dacƒÉ e owner
  if (currentUser.id === OWNER_ID) {
    currentUser.isOwner = true;
    currentUser.isAdmin = true;
    currentUser.approved = true;
  }
  
  if (currentUser.approved) {
    showMainApp();
  } else {
    showPendingScreen();
  }
  
  updateAdminPanel();
}

function showLoginScreen() {
  $('login-screen').style.display = 'flex';
  $('login-content').style.display = 'block';
  $('pending-content').style.display = 'none';
  $('main-app').classList.remove('unlocked');
  $('admin-toggle').style.display = 'none';
  $('admin-panel').style.display = 'none';
}

function showPendingScreen() {
  $('login-screen').style.display = 'flex';
  $('login-content').style.display = 'none';
  $('pending-content').style.display = 'block';
  $('main-app').classList.remove('unlocked');
  
  $('pending-avatar').src = currentUser.avatar;
  $('pending-name').textContent = currentUser.username;
  $('pending-id').textContent = 'ID: ' + currentUser.id;
  
  // AdaugƒÉ badge de owner dacƒÉ e cazul
  if (currentUser.id === OWNER_ID) {
    $('pending-name').classList.add('owner');
    $('pending-avatar').classList.add('owner');
  }
}

function showMainApp() {
  $('login-screen').style.display = 'none';
  $('main-app').classList.add('unlocked');
  
  $('user-avatar').src = currentUser.avatar;
  $('user-display-name').textContent = currentUser.username;
  
  // Badge rol
  const roleBadge = $('user-role-badge');
  if (currentUser.isOwner) {
    roleBadge.innerHTML = '<span class="owner-badge">üëë OWNER</span>';
    $('user-avatar').classList.add('owner');
    $('user-avatar').style.borderColor = 'var(--owner)';
  } else if (currentUser.isAdmin) {
    roleBadge.innerHTML = '<span style="color: var(--r); font-weight: 700;">üõ°Ô∏è ADMIN</span>';
  } else {
    roleBadge.innerHTML = '<span style="color: var(--g);">‚úÖ MEMBRU</span>';
  }
  
  // Afi»ôeazƒÉ controalele admin/owner
  if (currentUser.isAdmin || currentUser.isOwner) {
    showAdminControls();
  }
}

function showAdminControls() {
  $('admin-toggle').style.display = 'block';
  $('admin-name').textContent = currentUser.username;
  
  // Stil special pentru owner
  if (currentUser.isOwner) {
    $('admin-toggle').classList.add('owner');
    $('admin-panel').classList.add('owner');
    $('admin-role').textContent = 'üëë OWNER';
    $('admin-role').style.color = 'var(--owner)';
  } else {
    $('admin-role').textContent = 'üõ°Ô∏è Admin';
  }
}

function logout() {
  currentUser = null;
  localStorage.removeItem('craft_current_user');
  showLoginScreen();
}

function toggleAdmin() {
  const panel = $('admin-panel');
  panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
  if (panel.style.display === 'block') {
    updateAdminPanel();
    renderDataList();
  }
}

function updateAdminPanel() {
  if (!currentUser || !currentUser.isAdmin) return;
  
  $('stat-total').textContent = users.length;
  $('stat-approved').textContent = users.filter(u => u.approved).length;
  $('stat-pending').textContent = users.filter(u => !u.approved).length;
  
  const list = $('user-list');
  const searchTerm = ($('search-users')?.value || '').toLowerCase();
  
  list.innerHTML = '';
  
  users
    .filter(u => u.username.toLowerCase().includes(searchTerm) || u.id.includes(searchTerm))
    .sort((a, b) => new Date(b.joinedAt) - new Date(a.joinedAt))
    .forEach(user => {
      const isOwner = user.id === OWNER_ID;
      const item = document.createElement('div');
      item.className = 'user-item ' + (user.approved ? 'approved' : 'pending') + (isOwner ? ' owner' : '');
      item.innerHTML = `
        <div style="display: flex; align-items: center; gap: 8px;">
          <img src="${user.avatar}" style="width: 28px; height: 28px; border-radius: 50%; ${isOwner ? 'border: 2px solid #ff0000;' : ''}">
          <div style="text-align: left;">
            <div style="font-weight: 600; color: ${isOwner ? '#ff0000' : 'var(--tx)'}; font-size: 0.85rem;">
              ${user.username} ${isOwner ? 'üëë' : ''}
            </div>
            <div style="font-size: 0.7rem; color: var(--dm);">${user.id}</div>
          </div>
        </div>
        <div class="action-btns">
          ${isOwner ? 
            `<span style="color: #ff0000; font-size: 0.7rem; font-weight: 700;">OWNER</span>` :
            `${!user.approved ? 
              `<button class="action-btn approve-btn" onclick="approveUser('${user.id}')">AprobƒÉ</button>` :
              `<button class="action-btn remove-btn" onclick="revokeUser('${user.id}')">RevocƒÉ</button>`
            }
            ${!user.isAdmin && user.approved ? 
              `<button class="action-btn approve-btn" onclick="makeAdmin('${user.id}')" style="background: var(--a);">Admin</button>` : ''
            }
            <button class="action-btn reject-btn" onclick="removeUser('${user.id}')">»òterge</button>`
          }
        </div>
      `;
      list.appendChild(item);
    });
}

function approveUser(userId) {
  const user = users.find(u => u.id === userId);
  if (user) {
    user.approved = true;
    localStorage.setItem('craft_users', JSON.stringify(users));
    updateAdminPanel();
    if (currentUser && currentUser.id === userId) checkAccess();
  }
}

function revokeUser(userId) {
  const user = users.find(u => u.id === userId);
  if (user && user.id !== OWNER_ID) { // Nu po»õi revoca owner-ul
    user.approved = false;
    user.isAdmin = false;
    localStorage.setItem('craft_users', JSON.stringify(users));
    updateAdminPanel();
    if (currentUser && currentUser.id === userId) logout();
  }
}

function makeAdmin(userId) {
  const user = users.find(u => u.id === userId);
  if (user) {
    user.isAdmin = true;
    localStorage.setItem('craft_users', JSON.stringify(users));
    updateAdminPanel();
  }
}

function removeUser(userId) {
  if (userId === OWNER_ID) {
    alert('Nu po»õi »ôterge OWNER-ul!');
    return;
  }
  if (confirm('Sigur vrei sƒÉ »ôtergi acest utilizator?')) {
    users = users.filter(u => u.id !== userId);
    localStorage.setItem('craft_users', JSON.stringify(users));
    updateAdminPanel();
    if (currentUser && currentUser.id === userId) logout();
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ‚ñà‚ñà‚ñà  MANAGER DATE (EXISTENT)  ‚ñà‚ñà‚ñà
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

function switchDataCategory(category) {
  currentDataCategory = category;
  document.querySelectorAll('.cat-tab').forEach(tab => tab.classList.remove('active'));
  event.target.classList.add('active');
  renderDataList();
}

function renderDataList() {
  const container = $('data-list');
  container.innerHTML = '';
  
  let data;
  switch(currentDataCategory) {
    case 'arme': data = ARME; break;
    case 'munitie': data = MUNITIE; break;
    case 'componente': data = COMP; break;
    case 'masa': data = MASA; break;
    case 'locatii': data = LOC; break;
  }
  
  Object.entries(data).forEach(([key, value]) => {
    const item = document.createElement('div');
    item.className = 'data-item';
    item.innerHTML = renderItemHTML(key, value);
    container.appendChild(item);
  });
}

function renderItemHTML(key, value) {
  let meta = '';
  switch(currentDataCategory) {
    case 'arme':
      meta = `Munitie: ${value.mun} | Piese: ${Object.keys(value.piese).length}`;
      return `
        <div class="data-item-info">
          <div class="data-item-name">üî´ ${key} ${catBadge(value.cat)}</div>
          <div class="data-item-meta">${meta}</div>
        </div>
        <div class="data-item-actions">
          <button class="icon-btn edit" onclick="editItem('${key}')">‚úèÔ∏è</button>
          <button class="icon-btn delete" onclick="deleteItem('${key}')">üóëÔ∏è</button>
        </div>`;
    case 'munitie':
      return `
        <div class="data-item-info">
          <div class="data-item-name">üéØ ${key}</div>
          <div class="data-item-meta">${value.gpc} gl/carcasa | ${value.cat}</div>
        </div>
        <div class="data-item-actions">
          <button class="icon-btn edit" onclick="editItem('${key}')">‚úèÔ∏è</button>
          <button class="icon-btn delete" onclick="deleteItem('${key}')">üóëÔ∏è</button>
        </div>`;
    case 'componente':
      return `
        <div class="data-item-info">
          <div class="data-item-name">‚öôÔ∏è ${key}</div>
          <div class="data-item-meta">${Object.keys(value.mat).length} materiale</div>
        </div>
        <div class="data-item-actions">
          <button class="icon-btn edit" onclick="editItem('${key}')">‚úèÔ∏è</button>
          <button class="icon-btn delete" onclick="deleteItem('${key}')">üóëÔ∏è</button>
        </div>`;
    case 'masa':
      return `
        <div class="data-item-info">
          <div class="data-item-name">üî® ${key} <span style="color: var(--s);">[${value.cat}]</span></div>
          <div class="data-item-meta">${value.mat.length} nivele</div>
        </div>
        <div class="data-item-actions">
          <button class="icon-btn edit" onclick="editItem('${key}')">‚úèÔ∏è</button>
          <button class="icon-btn delete" onclick="deleteItem('${key}')">üóëÔ∏è</button>
        </div>`;
    case 'locatii':
      return `
        <div class="data-item-info">
          <div class="data-item-name">${value.emoji} ${key}</div>
          <div class="data-item-meta">${value.mat.length} materiale | ${value.desc}</div>
        </div>
        <div class="data-item-actions">
          <button class="icon-btn edit" onclick="editItem('${key}')">‚úèÔ∏è</button>
          <button class="icon-btn delete" onclick="deleteItem('${key}')">üóëÔ∏è</button>
        </div>`;
  }
}

function openAddModal() {
  editingItem = null;
  $('modal-title').textContent = `Adauga ${getCategoryLabel()}`;
  $('modal-content').innerHTML = generateFormFields();
  $('modal-overlay').classList.add('active');
}

function editItem(key) {
  editingItem = key;
  $('modal-title').textContent = `Editeaza ${getCategoryLabel()}`;
  $('modal-content').innerHTML = generateFormFields(key);
  $('modal-overlay').classList.add('active');
}

function closeModal() {
  $('modal-overlay').classList.remove('active');
  editingItem = null;
}

function getCategoryLabel() {
  const labels = {
    'arme': 'Arma',
    'munitie': 'Tip Munitie',
    'componente': 'Componenta',
    'masa': 'Reteta Masa',
    'locatii': 'Locatie'
  };
  return labels[currentDataCategory] || 'Intrare';
}

function generateFormFields(editKey = null) {
  let data = null;
  if (editKey) {
    switch(currentDataCategory) {
      case 'arme': data = ARME[editKey]; break;
      case 'munitie': data = MUNITIE[editKey]; break;
      case 'componente': data = COMP[editKey]; break;
      case 'masa': data = MASA[editKey]; break;
      case 'locatii': data = LOC[editKey]; break;
    }
  }
  
  let html = `
    <div class="form-group">
      <label>Nume / Identificator</label>
      <input type="text" id="field-name" value="${editKey || ''}" ${editKey ? 'readonly' : ''} 
             placeholder="Ex: Combat Pistol, 9mm, etc">
    </div>
  `;
  
  switch(currentDataCategory) {
    case 'arme':
      const categories = ['Pistol', 'SMG', 'Rifle', 'Shotgun', 'Heavy', 'MG', 'Special'];
      const munitieTypes = Object.keys(MUNITIE);
      html += `
        <div class="form-row">
          <div class="form-group">
            <label>Categorie</label>
            <select id="field-cat">
              ${categories.map(c => `<option value="${c}" ${data?.cat === c ? 'selected' : ''}>${c}</option>`).join('')}
            </select>
          </div>
          <div class="form-group">
            <label>Tip Munitie</label>
            <select id="field-mun">
              ${munitieTypes.map(m => `<option value="${m}" ${data?.mun === m ? 'selected' : ''}>${m}</option>`).join('')}
            </select>
          </div>
        </div>
        <div class="dynamic-fields">
          <h4>Piese Necesare <button type="button" onclick="addPiesaField()" style="padding: 4px 8px; background: var(--g); border: none; border-radius: 4px; color: #000; font-size: 0.7rem; cursor: pointer;">+ Adauga</button></h4>
          <div id="piese-container">
            ${data ? Object.entries(data.piese).map(([k, v]) => `
              <div class="field-row">
                <input type="text" placeholder="Nume piesa" value="${k}" class="piesa-name">
                <input type="number" placeholder="Cantitate" value="${v}" class="piesa-qty" style="width: 80px;">
                <button type="button" onclick="this.parentElement.remove()">‚úï</button>
              </div>
            `).join('') : ''}
          </div>
        </div>
      `;
      break;
      
    case 'munitie':
      html += `
        <div class="form-row">
          <div class="form-group">
            <label>Gloante per Carcasa</label>
            <input type="number" id="field-gpc" value="${data?.gpc || 30}" min="1">
          </div>
          <div class="form-group">
            <label>Categorie Arme</label>
            <input type="text" id="field-cat" value="${data?.cat || 'Pistol / SMG'}" placeholder="Ex: Pistol / SMG">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Cupru per Carcasa</label>
            <input type="number" id="field-cu" value="${data?.cu || 1}" min="0">
          </div>
          <div class="form-group">
            <label>Plumb per Carcasa</label>
            <input type="number" id="field-pb" value="${data?.pb || 1}" min="0">
          </div>
        </div>
        <div class="form-group">
          <label>Praf de Pusca per Carcasa</label>
          <input type="number" id="field-pr" value="${data?.pr || 1}" min="0">
        </div>
        <div class="form-group">
          <label>Reteta (text)</label>
          <textarea id="field-ret" placeholder="Ex: 1 Cupru + 1 Plumb + 1 Praf de Pusca = 30 gloante">${data?.ret || ''}</textarea>
        </div>
      `;
      break;
      
    case 'componente':
      html += `
        <div class="form-group">
          <label>Descriere</label>
          <textarea id="field-desc" placeholder="Descrierea componentei">${data?.desc || ''}</textarea>
        </div>
        <div class="dynamic-fields">
          <h4>Materiale Necesare <button type="button" onclick="addMaterialField()" style="padding: 4px 8px; background: var(--g); border: none; border-radius: 4px; color: #000; font-size: 0.7rem; cursor: pointer;">+ Adauga</button></h4>
          <div id="materiale-container">
            ${data ? Object.entries(data.mat).map(([k, v]) => `
              <div class="field-row">
                <input type="text" placeholder="Material" value="${k}" class="mat-name">
                <input type="text" placeholder="Cantitate" value="${v}" class="mat-qty" style="width: 100px;">
                <button type="button" onclick="this.parentElement.remove()">‚úï</button>
              </div>
            `).join('') : ''}
          </div>
        </div>
      `;
      break;
      
    case 'masa':
      html += `
        <div class="form-group">
          <label>Categorie</label>
          <select id="field-cat">
            <option value="Unelte" ${data?.cat === 'Unelte' ? 'selected' : ''}>Unelte</option>
            <option value="Materiale" ${data?.cat === 'Materiale' ? 'selected' : ''}>Materiale</option>
            <option value="Electronice" ${data?.cat === 'Electronice' ? 'selected' : ''}>Electronice</option>
          </select>
        </div>
        <div class="dynamic-fields">
          <h4>Retete pe Nivele <button type="button" onclick="addNivelField()" style="padding: 4px 8px; background: var(--g); border: none; border-radius: 4px; color: #000; font-size: 0.7rem; cursor: pointer;">+ Adauga</button></h4>
          <div id="nivele-container">
            ${data ? data.mat.map((m, i) => `
              <div class="field-row">
                <span style="color: var(--dm); font-size: 0.8rem; min-width: 50px;">LVL ${i+1}:</span>
                <input type="text" placeholder="Materiale" value="${m}" class="nivel-mat" style="flex: 1;">
                <button type="button" onclick="this.parentElement.remove()">‚úï</button>
              </div>
            `).join('') : ''}
          </div>
        </div>
      `;
      break;
      
    case 'locatii':
      html += `
        <div class="form-row">
          <div class="form-group">
            <label>Emoji</label>
            <input type="text" id="field-emoji" value="${data?.emoji || 'üìç'}" placeholder="üìç" maxlength="2">
          </div>
          <div class="form-group">
            <label>Descriere Job</label>
            <input type="text" id="field-desc" value="${data?.desc || ''}" placeholder="Ex: Job: Miner">
          </div>
        </div>
        <div class="dynamic-fields">
          <h4>Materiale Disponibile <button type="button" onclick="addLocMaterialField()" style="padding: 4px 8px; background: var(--g); border: none; border-radius: 4px; color: #000; font-size: 0.7rem; cursor: pointer;">+ Adauga</button></h4>
          <div id="loc-mat-container">
            ${data ? data.mat.map(m => `
              <div class="field-row">
                <input type="text" placeholder="Material" value="${m}" class="loc-mat" style="flex: 1;">
                <button type="button" onclick="this.parentElement.remove()">‚úï</button>
              </div>
            `).join('') : ''}
          </div>
        </div>
      `;
      break;
  }
  
  return html;
}

// Func»õii helper pentru c√¢mpuri dinamice
function addPiesaField() {
  const container = $('piese-container');
  const div = document.createElement('div');
  div.className = 'field-row';
  div.innerHTML = `
    <input type="text" placeholder="Nume piesa" class="piesa-name">
    <input type="number" placeholder="Cantitate" value="1" class="piesa-qty" style="width: 80px;">
    <button type="button" onclick="this.parentElement.remove()">‚úï</button>
  `;
  container.appendChild(div);
}

function addMaterialField() {
  const container = $('materiale-container');
  const div = document.createElement('div');
  div.className = 'field-row';
  div.innerHTML = `
    <input type="text" placeholder="Material" class="mat-name">
    <input type="text" placeholder="Cantitate" value="1x" class="mat-qty" style="width: 100px;">
    <button type="button" onclick="this.parentElement.remove()">‚úï</button>
  `;
  container.appendChild(div);
}

function addNivelField() {
  const container = $('nivele-container');
  const count = container.children.length + 1;
  const div = document.createElement('div');
  div.className = 'field-row';
  div.innerHTML = `
    <span style="color: var(--dm); font-size: 0.8rem; min-width: 50px;">LVL ${count}:</span>
    <input type="text" placeholder="Materiale" class="nivel-mat" style="flex: 1;">
    <button type="button" onclick="this.parentElement.remove()">‚úï</button>
  `;
  container.appendChild(div);
}

function addLocMaterialField() {
  const container = $('loc-mat-container');
  const div = document.createElement('div');
  div.className = 'field-row';
  div.innerHTML = `
    <input type="text" placeholder="Material" class="loc-mat" style="flex: 1;">
    <button type="button" onclick="this.parentElement.remove()">‚úï</button>
  `;
  container.appendChild(div);
}

function saveData() {
  const name = $('field-name').value.trim();
  if (!name) {
    alert('Numele este obligatoriu!');
    return;
  }
  
  let newData;
  
  try {
    switch(currentDataCategory) {
      case 'arme':
        newData = {
          cat: $('field-cat').value,
          mun: $('field-mun').value,
          piese: {}
        };
        document.querySelectorAll('.piesa-name').forEach((input, i) => {
          const qty = document.querySelectorAll('.piesa-qty')[i].value;
          if (input.value.trim()) {
            newData.piese[input.value.trim()] = parseInt(qty) || 1;
          }
        });
        break;
        
      case 'munitie':
        newData = {
          gpc: parseInt($('field-gpc').value) || 30,
          cat: $('field-cat').value,
          cu: parseInt($('field-cu').value) || 0,
          pb: parseInt($('field-pb').value) || 0,
          pr: parseInt($('field-pr').value) || 0,
          ret: $('field-ret').value
        };
        break;
        
      case 'componente':
        newData = {
          desc: $('field-desc').value,
          mat: {}
        };
        document.querySelectorAll('.mat-name').forEach((input, i) => {
          const qty = document.querySelectorAll('.mat-qty')[i].value;
          if (input.value.trim()) {
            newData.mat[input.value.trim()] = qty;
          }
        });
        break;
        
      case 'masa':
        newData = {
          cat: $('field-cat').value,
          mat: []
        };
        document.querySelectorAll('.nivel-mat').forEach(input => {
          if (input.value.trim()) {
            newData.mat.push(input.value.trim());
          }
        });
        break;
        
      case 'locatii':
        newData = {
          emoji: $('field-emoji').value || 'üìç',
          desc: $('field-desc').value,
          mat: []
        };
        document.querySelectorAll('.loc-mat').forEach(input => {
          if (input.value.trim()) {
            newData.mat.push(input.value.trim());
          }
        });
        break;
    }
    
    // SalveazƒÉ √Æn obiectul corespunzƒÉtor
    switch(currentDataCategory) {
      case 'arme': ARME[name] = newData; break;
      case 'munitie': MUNITIE[name] = newData; break;
      case 'componente': COMP[name] = newData; break;
      case 'masa': MASA[name] = newData; break;
      case 'locatii': LOC[name] = newData; break;
    }
    
    saveAppData();
    renderDataList();
    refreshAppUI();
    
    closeModal();
    showNotification(`${getCategoryLabel()} "${name}" a fost ${editingItem ? 'actualizat' : 'adaugat'}!`);
    
  } catch (e) {
    alert('Eroare la salvare: ' + e.message);
  }
}

function deleteItem(key) {
  if (!confirm(`Sigur vrei sƒÉ »ôtergi "${key}"?`)) return;
  
  switch(currentDataCategory) {
    case 'arme': delete ARME[key]; break;
    case 'munitie': delete MUNITIE[key]; break;
    case 'componente': delete COMP[key]; break;
    case 'masa': delete MASA[key]; break;
    case 'locatii': delete LOC[key]; break;
  }
  
  saveAppData();
  renderDataList();
  refreshAppUI();
  showNotification(`${getCategoryLabel()} "${key}" a fost »ôters!`);
}

function refreshAppUI() {
  initB(); cB();
  initA(); cA();
  initComp();
  initM();
  initL();
}

function exportData() {
  const dataStr = JSON.stringify(APP_DATA, null, 2);
  const dataBlob = new Blob([dataStr], {type: 'application/json'});
  const url = URL.createObjectURL(dataBlob);
  const link = document.createElement('a');
  link.href = url;
  link.download = `craft_backup_${new Date().toISOString().split('T')[0]}.json`;
  link.click();
  URL.revokeObjectURL(url);
  showNotification('üíæ Date exportate cu succes!');
}

function resetToDefault() {
  if (!confirm('‚ö†Ô∏è SIGUR vrei sƒÉ resetezi TOATE datele la valorile default? AceastƒÉ ac»õiune nu poate fi anulatƒÉ!')) return;
  
  APP_DATA = JSON.parse(JSON.stringify(DEFAULT_DATA));
  MUNITIE = APP_DATA.MUNITIE;
  ARME = APP_DATA.ARME;
  COMP = APP_DATA.COMP;
  MATARME = APP_DATA.MATARME;
  MASA = APP_DATA.MASA;
  LOC = APP_DATA.LOC;
  
  saveAppData();
  renderDataList();
  refreshAppUI();
  showNotification('üîÑ Date resetate la valorile default!');
}

function showNotification(message) {
  const notif = document.createElement('div');
  notif.style.cssText = `
    position: fixed; bottom: 20px; right: 20px; z-index: 10002;
    background: linear-gradient(135deg, var(--g), #00cc6a);
    color: #000; padding: 16px 24px; border-radius: 12px;
    font-family: 'Rajdhani', sans-serif; font-weight: 700;
    box-shadow: 0 10px 30px rgba(0,255,136,.3);
    animation: slideIn 0.3s ease;
  `;
  notif.textContent = message;
  document.body.appendChild(notif);
  
  setTimeout(() => {
    notif.style.animation = 'slideOut 0.3s ease';
    setTimeout(() => notif.remove(), 300);
  }, 3000);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ‚ñà‚ñà‚ñà  APLICATIA PRINCIPALA  ‚ñà‚ñà‚ñà
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

const $ = id => document.getElementById(id);
const F = n => Math.floor(n).toLocaleString('ro-RO');
function A(id, v) {
  const e = $(id); if (!e) return;
  e.textContent = v; e.classList.remove('up');
  void e.offsetWidth; e.classList.add('up');
}
function catBadge(cat) {
  const c = cat.toLowerCase().replace(/\s.*/,'');
  const map = {pistol:'pistol',smg:'smg',rifle:'rifle',shotgun:'shotgun',heavy:'heavy',mg:'mg',special:'special'};
  return `<span class="cat-badge ${map[c]||'special'}">${cat}</span>`;
}

const MAFIE_TABS = [
  ['cocaina',  'üíé Cocaina'],
  ['gloante',  'üéØ Gloante'],
  ['arme',     'üî´ Arme'],
  ['comp',     '‚öôÔ∏è Componente'],
];

const LEGAL_TABS = [
  ['masa', 'üî® Masa Craft'],
  ['loc',  'üìç Locatii'],
];

let currentGroup = 'mafie';

function showGroup(group) {
  currentGroup = group;
  document.querySelectorAll('.cat-group-btn').forEach(b => b.classList.remove('on'));
  document.querySelector(`.cat-group-btn.${group}`).classList.add('on');
  document.querySelectorAll('.cat-panel').forEach(p => p.classList.remove('on'));
  $('g_' + group).classList.add('on');
  const tabs = group === 'mafie' ? MAFIE_TABS : LEGAL_TABS;
  if (tabs.length > 0) switchSubTab(group, tabs[0][0]);
}

function buildSubTabs(containerId, tabs, group) {
  const c = $(containerId);
  c.innerHTML = '';
  tabs.forEach(([k, l], i) => {
    const b = document.createElement('div');
    b.className = 'tb' + (i === 0 ? ' on' : '');
    b.textContent = l;
    b.dataset.tab = k;
    b.dataset.group = group;
    b.onclick = () => switchSubTab(group, k);
    c.appendChild(b);
  });
}

function switchSubTab(group, tabId) {
  const container = $('g_' + group);
  container.querySelectorAll('.sub-tabs .tb').forEach(b => {
    b.classList.toggle('on', b.dataset.tab === tabId);
  });
  container.querySelectorAll('.pn').forEach(p => p.classList.remove('on'));
  const panel = $('p_' + tabId);
  if (panel) panel.classList.add('on');
}

function initNavigation() {
  buildSubTabs('mafie_tabs', MAFIE_TABS, 'mafie');
  buildSubTabs('legal_tabs', LEGAL_TABS, 'legal');
}

let curB = Object.keys(MUNITIE)[0] || '9mm';
function initB() {
  const c = $('bBtns');
  c.innerHTML = '';
  Object.entries(MUNITIE).forEach(([k, v]) => {
    const b = document.createElement('div');
    b.className = 'bt' + (k === curB ? ' on' : '');
    b.innerHTML = `<span>${k}</span><small>${v.gpc} gl/carcasa</small>`;
    b.onclick = () => {
      curB = k;
      document.querySelectorAll('#bBtns .bt').forEach(x => x.classList.remove('on'));
      b.classList.add('on'); cB();
    };
    c.appendChild(b);
  });
}
function cB() {
  const w = parseInt($('bI').value) || 0, cfg = MUNITIE[curB]; if (!cfg) return;
  const ca = Math.ceil(w / cfg.gpc), pr = ca * cfg.gpc;
  const cu = ca * cfg.cu, pb = ca * cfg.pb, pf = ca * cfg.pr;
  A('bC', F(ca)); A('bP', F(pr));
  A('bCu', F(cu)); A('bPb', F(pb)); A('bPr', F(pf));
  A('bT', curB); A('bQ', F(w)); A('bTP', F(pr)); A('bTM', F(cu + pb + pf));
  $('bR').textContent = cfg.ret;
}

const COCA_STEPS = [
  ['Frunze de Coca',      'üåø', 'gn'],
  ['Sticle (Extractie)',  'üß™', 'bl'],
  ['Tavi (Uscare)',       'üç≥', 'gl'],
  ['Brichete (Presare)',  'üß±', 'rd'],
  ['Pungi (Impartire)',   'üëú', 'vt'],
  ['Plicuri (Final)',     'üì¶', 'gn'],
];
function initC() {
  const c = $('cCards');
  c.innerHTML = '';
  COCA_STEPS.forEach((s, i) => {
    c.innerHTML += `<div class="mc ${s[2]}"><div class="ic">${s[1]}</div><div class="nm">${s[0]}</div><div class="vl" id="cc${i}">0</div><div class="un" id="ck${i}">0.00 kg</div></div>`;
  });
}
function cC() {
  const f = parseInt($('cI').value) || 0;
  const fk=.04*f, sn=.05*f, sk=.4*sn, tn=sn, tk=.3*tn;
  const bn=tn, bk=.2*bn, pn=2*bn, pk=.03*pn, ln=pn, lk=.2*ln;
  const vals = [[f,fk],[sn,sk],[tn,tk],[bn,bk],[pn,pk],[ln,lk]];
  vals.forEach(([n,k], i) => { A('cc'+i, F(Math.floor(n))); $('ck'+i).textContent = k.toFixed(2)+' kg' });
  A('cK', (fk+sk+tk+bk+pk).toFixed(2));
  A('cP', F(Math.floor(ln)));
  A('cF', '$' + F(Math.floor(ln * 13600)));
}

function initA() {
  const s = $('aS');
  s.innerHTML = '';
  const cats = {};
  Object.entries(ARME).forEach(([k, v]) => {
    if (!cats[v.cat]) cats[v.cat] = [];
    cats[v.cat].push(k);
  });
  Object.entries(cats).forEach(([cat, names]) => {
    const g = document.createElement('optgroup');
    g.label = cat;
    names.forEach(n => { const o = document.createElement('option'); o.value = n; o.textContent = n; g.appendChild(o) });
    s.appendChild(g);
  });
}
function cA() {
  const n = $('aS').value, q = parseInt($('aQ').value) || 1, a = ARME[n]; if (!a) return;
  let h = `<div class="sc"><div class="st">${n} √ó ${q}</div>
  <div class="ib">Categorie: ${catBadge(a.cat)} &nbsp; Munitie: <b style="color:var(--s)">${a.mun}</b></div>
  <table><tr><th>Piesa</th><th>Per Arma</th><th>Total (√ó${q})</th></tr>`;
  let t = 0;
  Object.entries(a.piese).forEach(([p, nr]) => {
    h += `<tr><td>${p}</td><td>${nr}√ó</td><td><b>${nr*q}√ó</b></td></tr>`;
    t += nr * q;
  });
  h += `<tr style="border-top:2px solid var(--p)"><td colspan="2"><b style="color:var(--a)">TOTAL PIESE</b></td><td><b style="color:var(--s);font-size:1.1rem">${t}√ó</b></td></tr></table></div>`;
  const m = MUNITIE[a.mun];
  if (m) h += `<div class="sc"><div class="st cyan">üéØ Munitie Recomandata: ${a.mun}</div>
  <div class="rc"><b>${m.ret}</b></div>
  <div class="ib">Foloseste tab-ul <b>üéØ Gloante</b> pentru calculator detaliat munitie</div></div>`;
  $('aR').innerHTML = h;
}

function initComp() {
  let h = `<div class="sc"><div class="st cyan">üî© Componente Craft</div>
  <table><tr><th>Componenta</th><th>Materiale Necesare</th><th>Descriere</th></tr>`;
  Object.entries(COMP).forEach(([k, v]) => {
    const mats = Object.values(v.mat).map(m => `<span style="color:var(--s)">${m}</span>`).join(', ');
    h += `<tr><td><b>${k}</b></td><td>${mats}</td><td style="color:var(--dm)">${v.desc}</td></tr>`;
  });
  h += `</table></div>`;

  h += `<div class="sc"><div class="st">üõ†Ô∏è Materiale Arme ‚Üí Piese de Arme</div>
  <table><tr><th>Piesa</th><th>Piese Arme Necesare</th><th>Categorie</th></tr>`;
  Object.entries(MATARME).forEach(([k, v]) => {
    h += `<tr><td><b>${k}</b></td><td style="color:var(--s);font-weight:700">${v.pa}√ó</td><td>${catBadge(v.cat)}</td></tr>`;
  });
  h += `</table></div>`;
  $('cT').innerHTML = h;
}

function initM() {
  const cats = {};
  Object.entries(MASA).forEach(([k, v]) => {
    if (!cats[v.cat]) cats[v.cat] = [];
    cats[v.cat].push([k, v]);
  });

  let h = '';
  Object.entries(cats).forEach(([cat, items]) => {
    h += `<div class="sc"><div class="st gold">üî® ${cat.toUpperCase()}</div>`;
    items.forEach(([name, data]) => {
      h += `<div style="margin:12px 0;padding:14px;background:rgba(255,215,0,.04);border:1px solid rgba(255,215,0,.12);border-radius:10px">
      <div style="font-weight:700;color:var(--s);margin-bottom:8px;font-size:1rem">${name}</div>
      <div style="display:flex;flex-wrap:wrap;gap:8px">`;
      data.mat.forEach((m, i) => {
        h += `<div style="padding:6px 12px;background:rgba(0,212,255,.06);border:1px solid rgba(0,212,255,.15);border-radius:8px;font-size:.82rem">
        <span style="color:var(--dm);font-size:.65rem">LVL ${i+1}</span><br>
        <span style="color:var(--a);font-weight:600">${m}</span></div>`;
      });
      h += `</div></div>`;
    });
    h += `</div>`;
  });
  $('mT').innerHTML = h;
}

function initL() {
  let h = '<div class="gr g2">';
  Object.entries(LOC).forEach(([k, v]) => {
    h += `<div class="mc bl" style="text-align:left;padding:20px">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
      <span style="font-size:2rem">${v.emoji}</span>
      <div>
        <div style="font-family:'Orbitron',monospace;font-size:.8rem;color:var(--s);font-weight:700;letter-spacing:1px">${k}</div>
        <div style="font-size:.7rem;color:var(--dm)">${v.desc}</div>
      </div>
    </div>`;
    v.mat.forEach(m => {
      h += `<div style="padding:6px 0;color:var(--tx);font-size:.88rem;border-bottom:1px solid rgba(255,255,255,.04)">
      <span style="color:var(--a);margin-right:6px">‚ñ∏</span>${m}</div>`;
    });
    h += '</div>';
  });
  h += '</div>';
  $('lT').innerHTML = h;
}

function initParticles() {
  const c = $('particles'), ctx = c.getContext('2d');
  let W, H, pts = [];
  function resize() { W = c.width = innerWidth; H = c.height = innerHeight }
  resize(); addEventListener('resize', resize);
  for (let i = 0; i < 40; i++) {
    pts.push({
      x: Math.random()*W, y: Math.random()*H,
      r: Math.random()*1.5+.5, dx: (Math.random()-.5)*.3, dy: (Math.random()-.5)*.3,
      a: Math.random()*.3+.1
    });
  }
  function draw() {
    ctx.clearRect(0, 0, W, H);
    pts.forEach(p => {
      p.x += p.dx; p.y += p.dy;
      if (p.x < 0) p.x = W; if (p.x > W) p.x = 0;
      if (p.y < 0) p.y = H; if (p.y > H) p.y = 0;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255,107,53,${p.a})`;
      ctx.fill();
    });
    for (let i = 0; i < pts.length; i++) {
      for (let j = i+1; j < pts.length; j++) {
        const dx = pts[i].x - pts[j].x, dy = pts[i].y - pts[j].y;
        const d = Math.sqrt(dx*dx + dy*dy);
        if (d < 120) {
          ctx.beginPath();
          ctx.moveTo(pts[i].x, pts[i].y);
          ctx.lineTo(pts[j].x, pts[j].y);
          ctx.strokeStyle = `rgba(255,107,53,${.06*(1-d/120)})`;
          ctx.lineWidth = .5;
          ctx.stroke();
        }
      }
    }
    requestAnimationFrame(draw);
  }
  draw();
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ‚ñà‚ñà‚ñà  INITIALIZARE  ‚ñà‚ñà‚ñà
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

if (window.location.hash.includes('access_token')) {
  handleDiscordCallback();
} else {
  initParticles();
  initNavigation();
  initB(); cB();
  initC(); cC();
  initA(); cA();
  initComp();
  initM();
  initL();
  checkAccess();
}

document.addEventListener('DOMContentLoaded', () => {
  const searchInput = $('search-users');
  if (searchInput) {
    searchInput.addEventListener('input', updateAdminPanel);
  }
});
</script>
</body>
</html>
